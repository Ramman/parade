<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Parade by Ancestry</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Parade</h1>
          <h2>parade is a cluster manager and also a process monitor for node.js applications</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/Ancestry/parade/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/Ancestry/parade/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/Ancestry/parade" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>
<a name="parade" class="anchor" href="#parade"><span class="octicon octicon-link"></span></a>parade</h1>

<p>parade is a cluster manager and also a process monitor for node.js applications.
It forks multiple processes based on the number of cores available in the CPU
and provides restful endpoints that provide data to track status, memory and cpu for individual node processes and servers.</p>

<p><a href="https://badge.fury.io/for/js/parade"><img src="https://badge.fury.io/js/parade.svg" alt="NPM Version"></a>
<a href="https://travis-ci.org/Ancestry/parade"><img src="https://travis-ci.org/Ancestry/parade.svg?branch=master" alt="Build Status"></a></p>

<h2>
<a name="contributors" class="anchor" href="#contributors"><span class="octicon octicon-link"></span></a>Contributors</h2>

<ul>
<li>Author: Prasanna Ramanujam <a href="mailto:pramanujam@ancestry.com">pramanujam@ancestry.com</a>
</li>
</ul><h2>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h2>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>npm install -g parade
</pre></div>

<h2>
<a name="start-the-app" class="anchor" href="#start-the-app"><span class="octicon octicon-link"></span></a>Start the app</h2>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>parade &lt;app.js&gt; <span class="o">[</span>clusters<span class="o">]</span>
</pre></div>

<h3>
<a name="arguments" class="anchor" href="#arguments"><span class="octicon octicon-link"></span></a>Arguments</h3>

<ul>
<li>app.js: the main js file of your application</li>
<li>clusters (optional): # of clusters to fork. By default, it is set to (# of cores - 1)</li>
</ul><h3>
<a name="examples" class="anchor" href="#examples"><span class="octicon octicon-link"></span></a>Examples</h3>

<h4>
<a name="to-run-your-app" class="anchor" href="#to-run-your-app"><span class="octicon octicon-link"></span></a>To run your app</h4>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>parade app.js
<span class="nv">$ </span>parade app.js 3
</pre></div>

<h4>
<a name="to-run-the-example-in-this-module" class="anchor" href="#to-run-the-example-in-this-module"><span class="octicon octicon-link"></span></a>To run the example in this module</h4>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>parade ./example/app.js
</pre></div>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>parade ./example/app.js 3

Argument 3, worker file name: ./example/app.js
Number of process forks  : 3
parade web api server running in 5667
Worker is online, Worker ID :  1
Worker is online, Worker ID :  2
Worker is online, Worker ID :  3
</pre></div>

<h2>
<a name="tests" class="anchor" href="#tests"><span class="octicon octicon-link"></span></a>Tests</h2>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>npm install
<span class="nv">$ </span>npm <span class="nb">test</span>
</pre></div>

<h2>
<a name="rest-endpoints" class="anchor" href="#rest-endpoints"><span class="octicon octicon-link"></span></a>Rest Endpoints</h2>

<p>Start the app with parade and test the following rest end points</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>parade app.js
</pre></div>

<h3>
<a name="stats" class="anchor" href="#stats"><span class="octicon octicon-link"></span></a>Stats</h3>

<p>It gets metrics of all worker processes</p>

<p><a href="http://localhost:5667/stats">http://localhost:5667/stats</a></p>

<h4>
<a name="sample-result" class="anchor" href="#sample-result"><span class="octicon octicon-link"></span></a>Sample result</h4>

<div class="highlight highlight-js"><pre><span class="p">{</span>
  <span class="s2">"processStats"</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">"pid"</span><span class="o">:</span> <span class="mi">12335</span><span class="p">,</span>
      <span class="s2">"memory"</span><span class="o">:</span> <span class="mi">39047168</span><span class="p">,</span>
      <span class="s2">"cpu"</span><span class="o">:</span> <span class="mi">0</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">"pid"</span><span class="o">:</span> <span class="mi">12337</span><span class="p">,</span>
      <span class="s2">"memory"</span><span class="o">:</span> <span class="mi">42954752</span><span class="p">,</span>
      <span class="s2">"cpu"</span><span class="o">:</span> <span class="mi">0</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">"osStats"</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">"totalMem"</span><span class="o">:</span> <span class="mi">4009091072</span><span class="p">,</span>
    <span class="s2">"freeMem"</span><span class="o">:</span> <span class="mi">1395204096</span><span class="p">,</span>
    <span class="s2">"cpus"</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s2">"model"</span><span class="o">:</span> <span class="s2">"Intel(R) Xeon(R) CPU E5-2670 0 @ 2.60GHz"</span><span class="p">,</span>
        <span class="s2">"speed"</span><span class="o">:</span> <span class="mi">2599</span><span class="p">,</span>
        <span class="s2">"times"</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">"user"</span><span class="o">:</span> <span class="mi">125852300</span><span class="p">,</span>
          <span class="s2">"nice"</span><span class="o">:</span> <span class="mi">334700</span><span class="p">,</span>
          <span class="s2">"sys"</span><span class="o">:</span> <span class="mi">59101600</span><span class="p">,</span>
          <span class="s2">"idle"</span><span class="o">:</span> <span class="mi">108351690500</span><span class="p">,</span>
          <span class="s2">"irq"</span><span class="o">:</span> <span class="mi">54764100</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">"model"</span><span class="o">:</span> <span class="s2">"Intel(R) Xeon(R) CPU E5-2670 0 @ 2.60GHz"</span><span class="p">,</span>
        <span class="s2">"speed"</span><span class="o">:</span> <span class="mi">2599</span><span class="p">,</span>
        <span class="s2">"times"</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">"user"</span><span class="o">:</span> <span class="mi">57877800</span><span class="p">,</span>
          <span class="s2">"nice"</span><span class="o">:</span> <span class="mi">343100</span><span class="p">,</span>
          <span class="s2">"sys"</span><span class="o">:</span> <span class="mi">31694400</span><span class="p">,</span>
          <span class="s2">"idle"</span><span class="o">:</span> <span class="mi">108823011800</span><span class="p">,</span>
          <span class="s2">"irq"</span><span class="o">:</span> <span class="mi">0</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">"loadAvg"</span><span class="o">:</span> <span class="p">[</span>
      <span class="mi">0</span><span class="p">,</span>
      <span class="mi">0</span><span class="p">,</span>
      <span class="mi">0</span>
    <span class="p">],</span>
    <span class="s2">"uptime"</span><span class="o">:</span> <span class="mf">10986836.192939406</span><span class="p">,</span>
    <span class="s2">"platform"</span><span class="o">:</span> <span class="s2">"linux"</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<h3>
<a name="status" class="anchor" href="#status"><span class="octicon octicon-link"></span></a>Status</h3>

<p>It gets the status of all worker processes</p>

<p><a href="http://localhost:5667/status">http://localhost:5667/status</a></p>

<h4>
<a name="sample-result-1" class="anchor" href="#sample-result-1"><span class="octicon octicon-link"></span></a>Sample result</h4>

<div class="highlight highlight-js"><pre><span class="p">{</span>
  <span class="s2">"1"</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">"workerID"</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">"uniqueID"</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">"process"</span><span class="o">:</span> <span class="mi">12335</span><span class="p">,</span>
    <span class="s2">"status"</span><span class="o">:</span> <span class="s2">"ONLINE"</span>
  <span class="p">},</span>
  <span class="s2">"2"</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">"workerID"</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s2">"uniqueID"</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s2">"process"</span><span class="o">:</span> <span class="mi">12337</span><span class="p">,</span>
    <span class="s2">"status"</span><span class="o">:</span> <span class="s2">"ONLINE"</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<h2>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h2>

<p><a href="http://opensource.org/licenses/MIT">The MIT License</a></p>
        </section>

        <footer>
          Parade is maintained by <a href="https://github.com/Ancestry">Ancestry</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>